[gd_scene load_steps=22 format=4 uid="uid://du7fv2o3yevyi"]

[ext_resource type="TileSet" uid="uid://bjon0v57fcjwb" path="res://assets/tileset/room_builder.tres" id="1_vn80e"]
[ext_resource type="PackedScene" uid="uid://yk4dvrhyosg4" path="res://assets/units/main_character.tscn" id="2_n4mgf"]
[ext_resource type="Script" uid="uid://bwbjxyfr5bp0v" path="res://scripts/units/MainCharacter.cs" id="4_48n3s"]
[ext_resource type="Script" uid="uid://dlno6kv6pmaax" path="res://scripts/UI/PoiseBar.cs" id="4_jm2hm"]
[ext_resource type="Script" uid="uid://dvj38a56xot1l" path="res://scripts/interactables/Buildings.cs" id="4_w8s17"]
[ext_resource type="Texture2D" uid="uid://d350mydql1osk" path="res://art/characters/hero.jpg" id="5_fhxv8"]
[ext_resource type="Script" uid="uid://c8883r0e8nsen" path="res://scripts/units/Character.cs" id="5_jm2hm"]
[ext_resource type="Texture2D" uid="uid://c14vyxhylwcmh" path="res://art/characters/hand.jpg" id="6_a0ubh"]
[ext_resource type="Script" uid="uid://dxix1g37alm8x" path="res://scripts/controller/EnemyController.cs" id="6_xw5yf"]
[ext_resource type="PackedScene" uid="uid://doo5bn45q67ch" path="res://assets/component/fist.tscn" id="7_n6hjk"]
[ext_resource type="Script" uid="uid://bcsfogtiyiscq" path="res://scripts/units/Hitbox.cs" id="8_4iboa"]

[sub_resource type="Animation" id="Animation_n2e48"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("LeftFist:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-13, -8)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RightElbow/RightFist:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(13, -8)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("RightElbow:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_l6bvi"]
resource_name = "left_punch"
length = 0.433337
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("LeftFist:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.233333, 0.433333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(-13, -8), Vector2(-13, -23), Vector2(-13, -8)]
}

[sub_resource type="Animation" id="Animation_x6a0n"]
resource_name = "right_grab"
length = 0.433337
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RightElbow/RightFist:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.433333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(13, -8), Vector2(19.56, -8.3), Vector2(13, -8)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RightElbow:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.3, 0.433333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, -0.785398, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_n2e48"]
_data = {
&"RESET": SubResource("Animation_n2e48"),
&"left_punch": SubResource("Animation_l6bvi"),
&"right_grab": SubResource("Animation_x6a0n")
}

[sub_resource type="SpriteFrames" id="SpriteFrames_4iboa"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_fhxv8")
}],
"loop": true,
"name": &"new_animation",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_w2k4y"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_vn80e"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3mq1s"]
bg_color = Color(1, 1, 1, 1)
shadow_offset = Vector2(12, 25)

[sub_resource type="CircleShape2D" id="CircleShape2D_3mq1s"]

[sub_resource type="CircleShape2D" id="CircleShape2D_jm2hm"]

[node name="Root" type="Node2D"]

[node name="Map" type="Node2D" parent="."]

[node name="Floor" type="TileMapLayer" parent="Map"]
tile_map_data = PackedByteArray("AAAAAAAAAgAOAAsAAAAAAAEAAgAOAAwAAAABAAAAAgAPAAsAAAABAAEAAgAPAAwAAAACAAAAAgAQAAsAAAACAAEAAgAQAAwAAAAAAAIAAgAOAAsAAAAAAAMAAgAOAAwAAAABAAIAAgAPAAsAAAABAAMAAgAPAAwAAAACAAIAAgAQAAsAAAACAAMAAgAQAAwAAAAAAAQAAgAOAAsAAAAAAAUAAgAOAAwAAAABAAQAAgAPAAsAAAABAAUAAgAPAAwAAAACAAQAAgAQAAsAAAACAAUAAgAQAAwAAAAAAAYAAgAOAAsAAAAAAAcAAgAOAAwAAAABAAYAAgAPAAsAAAABAAcAAgAPAAwAAAACAAYAAgAQAAsAAAACAAcAAgAQAAwAAAAAAAgAAgAOAAsAAAAAAAkAAgAOAAwAAAABAAgAAgAPAAsAAAABAAkAAgAPAAwAAAACAAgAAgAQAAsAAAACAAkAAgAQAAwAAAAAAAoAAgAOAAsAAAAAAAsAAgAOAAwAAAABAAoAAgAPAAsAAAABAAsAAgAPAAwAAAACAAoAAgAQAAsAAAACAAsAAgAQAAwAAAAAAAwAAgAOAAsAAAAAAA0AAgAOAAwAAAABAAwAAgAPAAsAAAABAA0AAgAPAAwAAAACAAwAAgAQAAsAAAACAA0AAgAQAAwAAAADAAwAAgAOAAsAAAADAA0AAgAOAAwAAAAEAAwAAgAPAAsAAAAEAA0AAgAPAAwAAAAFAAwAAgAQAAsAAAAFAA0AAgAQAAwAAAAGAAwAAgAOAAsAAAAGAA0AAgAOAAwAAAAHAAwAAgAPAAsAAAAHAA0AAgAPAAwAAAAIAAwAAgAQAAsAAAAIAA0AAgAQAAwAAAAJAAoAAgAOAAsAAAAJAAsAAgAOAAwAAAAKAAoAAgAPAAsAAAAKAAsAAgAPAAwAAAALAAoAAgAQAAsAAAALAAsAAgAQAAwAAAAMAAoAAgAOAAsAAAAMAAsAAgAOAAwAAAANAAoAAgAPAAsAAAANAAsAAgAPAAwAAAAOAAoAAgAQAAsAAAAOAAsAAgAQAAwAAAAPAAoAAgAOAAsAAAAPAAsAAgAOAAwAAAAQAAoAAgAPAAsAAAAQAAsAAgAPAAwAAAARAAoAAgAQAAsAAAARAAsAAgAQAAwAAAASAAoAAgAOAAsAAAASAAsAAgAOAAwAAAATAAoAAgAPAAsAAAATAAsAAgAPAAwAAAAUAAoAAgAQAAsAAAAUAAsAAgAQAAwAAAAVAAoAAgAOAAsAAAAVAAsAAgAOAAwAAAAWAAoAAgAPAAsAAAAWAAsAAgAPAAwAAAAXAAoAAgAQAAsAAAAXAAsAAgAQAAwAAAAVAAwAAgAOAAsAAAAVAA0AAgAOAAwAAAAWAAwAAgAPAAsAAAAWAA0AAgAPAAwAAAAXAAwAAgAQAAsAAAAXAA0AAgAQAAwAAAASAAwAAgAOAAsAAAASAA0AAgAOAAwAAAATAAwAAgAPAAsAAAATAA0AAgAPAAwAAAAUAAwAAgAQAAsAAAAUAA0AAgAQAAwAAAAMAAwAAgAOAAsAAAAMAA0AAgAOAAwAAAANAAwAAgAPAAsAAAANAA0AAgAPAAwAAAAOAAwAAgAQAAsAAAAOAA0AAgAQAAwAAAAJAAwAAgAOAAsAAAAJAA0AAgAOAAwAAAAKAAwAAgAPAAsAAAAKAA0AAgAPAAwAAAALAAwAAgAQAAsAAAALAA0AAgAQAAwAAAAPAAwAAgAOAAsAAAAPAA0AAgAOAAwAAAAQAAwAAgAPAAsAAAAQAA0AAgAPAAwAAAARAAwAAgAQAAsAAAARAA0AAgAQAAwAAAAGAAoAAgAOAAsAAAAGAAsAAgAOAAwAAAAHAAoAAgAPAAsAAAAHAAsAAgAPAAwAAAAIAAoAAgAQAAsAAAAIAAsAAgAQAAwAAAADAAoAAgAOAAsAAAADAAsAAgAOAAwAAAAEAAoAAgAPAAsAAAAEAAsAAgAPAAwAAAAFAAoAAgAQAAsAAAAFAAsAAgAQAAwAAAADAAYAAgAOAAsAAAADAAcAAgAOAAwAAAAEAAYAAgAPAAsAAAAEAAcAAgAPAAwAAAAFAAYAAgAQAAsAAAAFAAcAAgAQAAwAAAAGAAYAAgAOAAsAAAAGAAcAAgAOAAwAAAAHAAYAAgAPAAsAAAAHAAcAAgAPAAwAAAAIAAYAAgAQAAsAAAAIAAcAAgAQAAwAAAAGAAgAAgAOAAsAAAAGAAkAAgAOAAwAAAAHAAgAAgAPAAsAAAAHAAkAAgAPAAwAAAAIAAgAAgAQAAsAAAAIAAkAAgAQAAwAAAADAAgAAgAOAAsAAAADAAkAAgAOAAwAAAAEAAgAAgAPAAsAAAAEAAkAAgAPAAwAAAAFAAgAAgAQAAsAAAAFAAkAAgAQAAwAAAAJAAgAAgAOAAsAAAAJAAkAAgAOAAwAAAAKAAgAAgAPAAsAAAAKAAkAAgAPAAwAAAALAAgAAgAQAAsAAAALAAkAAgAQAAwAAAAMAAgAAgAOAAsAAAAMAAkAAgAOAAwAAAANAAgAAgAPAAsAAAANAAkAAgAPAAwAAAAOAAgAAgAQAAsAAAAOAAkAAgAQAAwAAAAPAAgAAgAOAAsAAAAPAAkAAgAOAAwAAAAQAAgAAgAPAAsAAAAQAAkAAgAPAAwAAAARAAgAAgAQAAsAAAARAAkAAgAQAAwAAAASAAgAAgAOAAsAAAASAAkAAgAOAAwAAAATAAgAAgAPAAsAAAATAAkAAgAPAAwAAAAUAAgAAgAQAAsAAAAUAAkAAgAQAAwAAAAVAAgAAgAOAAsAAAAVAAkAAgAOAAwAAAAWAAgAAgAPAAsAAAAWAAkAAgAPAAwAAAAXAAgAAgAQAAsAAAAXAAkAAgAQAAwAAAAVAAYAAgAOAAsAAAAVAAcAAgAOAAwAAAAWAAYAAgAPAAsAAAAWAAcAAgAPAAwAAAAXAAYAAgAQAAsAAAAXAAcAAgAQAAwAAAASAAYAAgAOAAsAAAASAAcAAgAOAAwAAAATAAYAAgAPAAsAAAATAAcAAgAPAAwAAAAUAAYAAgAQAAsAAAAUAAcAAgAQAAwAAAASAAQAAgAOAAsAAAASAAUAAgAOAAwAAAATAAQAAgAPAAsAAAATAAUAAgAPAAwAAAAUAAQAAgAQAAsAAAAUAAUAAgAQAAwAAAAPAAYAAgAOAAsAAAAPAAcAAgAOAAwAAAAQAAYAAgAPAAsAAAAQAAcAAgAPAAwAAAARAAYAAgAQAAsAAAARAAcAAgAQAAwAAAAMAAYAAgAOAAsAAAAMAAcAAgAOAAwAAAANAAYAAgAPAAsAAAANAAcAAgAPAAwAAAAOAAYAAgAQAAsAAAAOAAcAAgAQAAwAAAAJAAYAAgAOAAsAAAAJAAcAAgAOAAwAAAAKAAYAAgAPAAsAAAAKAAcAAgAPAAwAAAALAAYAAgAQAAsAAAALAAcAAgAQAAwAAAADAAUAAgAOAAwAAAAEAAQAAgAPAAsAAAAEAAUAAgAPAAwAAAAFAAQAAgAQAAsAAAAFAAUAAgAQAAwAAAAGAAQAAgAOAAsAAAAGAAUAAgAOAAwAAAAHAAQAAgAPAAsAAAAHAAUAAgAPAAwAAAAIAAQAAgAQAAsAAAAIAAUAAgAQAAwAAAAGAAIAAgAOAAsAAAAGAAMAAgAOAAwAAAAHAAIAAgAPAAsAAAAHAAMAAgAPAAwAAAAIAAIAAgAQAAsAAAAIAAMAAgAQAAwAAAAJAAIAAgAOAAsAAAAJAAMAAgAOAAwAAAAKAAIAAgAPAAsAAAAKAAMAAgAPAAwAAAALAAIAAgAQAAsAAAALAAMAAgAQAAwAAAAMAAIAAgAOAAsAAAAMAAMAAgAOAAwAAAANAAIAAgAPAAsAAAANAAMAAgAPAAwAAAAOAAIAAgAQAAsAAAAOAAMAAgAQAAwAAAAPAAIAAgAOAAsAAAAPAAMAAgAOAAwAAAAQAAIAAgAPAAsAAAAQAAMAAgAPAAwAAAARAAIAAgAQAAsAAAARAAMAAgAQAAwAAAASAAIAAgAOAAsAAAASAAMAAgAOAAwAAAATAAIAAgAPAAsAAAATAAMAAgAPAAwAAAAUAAIAAgAQAAsAAAAUAAMAAgAQAAwAAAAVAAQAAgAOAAsAAAAVAAUAAgAOAAwAAAAWAAQAAgAPAAsAAAAWAAUAAgAPAAwAAAAXAAQAAgAQAAsAAAAXAAUAAgAQAAwAAAAPAAQAAgAOAAsAAAAPAAUAAgAOAAwAAAAQAAQAAgAPAAsAAAAQAAUAAgAPAAwAAAARAAQAAgAQAAsAAAARAAUAAgAQAAwAAAAMAAQAAgAOAAsAAAAMAAUAAgAOAAwAAAANAAQAAgAPAAsAAAANAAUAAgAPAAwAAAAOAAQAAgAQAAsAAAAOAAUAAgAQAAwAAAAJAAQAAgAOAAsAAAAJAAUAAgAOAAwAAAAKAAQAAgAPAAsAAAAKAAUAAgAPAAwAAAALAAQAAgAQAAsAAAALAAUAAgAQAAwAAAADAAIAAgAOAAsAAAADAAMAAgAOAAwAAAAEAAIAAgAPAAsAAAAEAAMAAgAPAAwAAAAFAAIAAgAQAAsAAAAFAAMAAgAQAAwAAAADAAAAAgAOAAsAAAADAAEAAgAOAAwAAAAEAAAAAgAPAAsAAAAEAAEAAgAPAAwAAAAFAAAAAgAQAAsAAAAFAAEAAgAQAAwAAAAGAAAAAgAOAAsAAAAGAAEAAgAOAAwAAAAHAAAAAgAPAAsAAAAHAAEAAgAPAAwAAAAIAAAAAgAQAAsAAAAIAAEAAgAQAAwAAAAJAAAAAgAOAAsAAAAJAAEAAgAOAAwAAAAKAAAAAgAPAAsAAAAKAAEAAgAPAAwAAAALAAAAAgAQAAsAAAALAAEAAgAQAAwAAAAMAAAAAgAOAAsAAAAMAAEAAgAOAAwAAAANAAAAAgAPAAsAAAANAAEAAgAPAAwAAAAOAAAAAgAQAAsAAAAOAAEAAgAQAAwAAAAPAAAAAgAOAAsAAAAPAAEAAgAOAAwAAAAQAAAAAgAPAAsAAAAQAAEAAgAPAAwAAAARAAAAAgAQAAsAAAARAAEAAgAQAAwAAAASAAAAAgAOAAsAAAASAAEAAgAOAAwAAAATAAAAAgAPAAsAAAATAAEAAgAPAAwAAAAUAAAAAgAQAAsAAAAUAAEAAgAQAAwAAAAVAAAAAgAOAAsAAAAVAAEAAgAOAAwAAAAWAAAAAgAPAAsAAAAWAAEAAgAPAAwAAAAXAAAAAgAQAAsAAAAXAAEAAgAQAAwAAAAVAAIAAgAOAAsAAAAVAAMAAgAOAAwAAAAWAAIAAgAPAAsAAAAWAAMAAgAPAAwAAAAXAAIAAgAQAAsAAAAXAAMAAgAQAAwAAAADAAQAAgAOAAsAAAA=")
tile_set = ExtResource("1_vn80e")

[node name="Buildings" type="TileMapLayer" parent="Map"]
z_index = 1
tile_map_data = PackedByteArray("AAAGAAUAAgALAAIAAAAGAAYAAgALAAIAAAAGAAcAAgALAAIAAAAGAAgAAgALAAIAAAAGAAkAAgALAAMAAAAHAAkAAgAMAAMAAAAIAAkAAgAMAAMAAAAJAAkAAgAMAAMAAAAKAAkAAgAMAAMAAAALAAkAAgANAAMAAAALAAgAAgANAAIAAAALAAcAAgANAAIAAAALAAYAAgANAAIAAAALAAUAAgANAAIAAAA=")
tile_set = ExtResource("1_vn80e")
script = ExtResource("4_w8s17")

[node name="MainCharacter" parent="." instance=ExtResource("2_n4mgf")]
position = Vector2(181, 220)

[node name="Enemy" type="CharacterBody2D" parent="."]
position = Vector2(652, 212)
script = ExtResource("4_48n3s")
speed = 150

[node name="AnimationPlayer" type="AnimationPlayer" parent="Enemy"]
libraries = {
&"": SubResource("AnimationLibrary_n2e48")
}

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Enemy"]
position = Vector2(0, 1)
scale = Vector2(0.5625, 0.5625)
sprite_frames = SubResource("SpriteFrames_4iboa")
animation = &"new_animation"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy"]
shape = SubResource("CircleShape2D_w2k4y")

[node name="EnemyController" type="Node" parent="Enemy"]
script = ExtResource("6_xw5yf")

[node name="Camera2D" type="Camera2D" parent="Enemy"]

[node name="LeftFist" parent="Enemy" instance=ExtResource("7_n6hjk")]
position = Vector2(-13, -8)

[node name="RightElbow" type="Node2D" parent="Enemy"]

[node name="RightFist" parent="Enemy/RightElbow" instance=ExtResource("7_n6hjk")]
position = Vector2(13, -8)

[node name="PoiseBar" type="ProgressBar" parent="Enemy" node_paths=PackedStringArray("defaultPoise")]
modulate = Color(0, 0.649306, 0.312909, 1)
offset_left = -20.0
offset_top = -30.0
offset_right = 92.0
offset_bottom = -17.0
scale = Vector2(0.344059, 0.867569)
theme_override_styles/background = SubResource("StyleBoxFlat_vn80e")
theme_override_styles/fill = SubResource("StyleBoxFlat_3mq1s")
max_value = 1.0
step = 0.1
value = 0.5
show_percentage = false
script = ExtResource("4_jm2hm")
defaultPoise = NodePath("../../MainCharacter")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PoiseBar" type="ProgressBar" parent="CanvasLayer" node_paths=PackedStringArray("defaultPoise")]
modulate = Color(0, 0.649306, 0.312909, 1)
offset_left = 21.0
offset_top = 142.0
offset_right = 133.0
offset_bottom = 155.0
theme_override_styles/background = SubResource("StyleBoxFlat_vn80e")
theme_override_styles/fill = SubResource("StyleBoxFlat_3mq1s")
max_value = 1.0
step = 0.1
value = 0.5
show_percentage = false
script = ExtResource("4_jm2hm")
defaultPoise = NodePath("../../MainCharacter")

[node name="PunchingBag" type="CharacterBody2D" parent="."]
position = Vector2(215, 122)
floor_constant_speed = true
script = ExtResource("5_jm2hm")

[node name="CollisionShape2D" type="CollisionShape2D" parent="PunchingBag"]
shape = SubResource("CircleShape2D_3mq1s")

[node name="Sprite2D" type="Sprite2D" parent="PunchingBag"]
scale = Vector2(1.8, 1.8)
texture = ExtResource("6_a0ubh")

[node name="Hitbox" type="Area2D" parent="PunchingBag"]
script = ExtResource("8_4iboa")

[node name="CollisionShape2D" type="CollisionShape2D" parent="PunchingBag/Hitbox"]
shape = SubResource("CircleShape2D_jm2hm")

[editable path="Enemy/LeftFist"]
[editable path="Enemy/RightElbow/RightFist"]
